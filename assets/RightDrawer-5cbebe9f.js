import{j as e}from"./index-abc57981.js";import{r as s,c as t}from"./react-vendor-132e4a4f.js";import{X as a,a0 as l,B as i,U as r,V as n,s as c,A as o,p as d,q as x,c as m,d as h,E as b,J as u,D as p,C as j,b as f,a1 as g,Y as N}from"./ui-vendor-1b8d788c.js";import"./firebase-auth-7a9d2df2.js";import"./firebase-core-a7cb50f5.js";import"./firebase-firestore-e3da4556.js";import"./firebase-database-b022e4c6.js";import"./firebase-functions-7c25f05b.js";const v=({isOpen:v,onClose:w,activeTab:y,onTabChange:k,isMobile:C,campaign:S,messages:z=[],players:E=[],worldState:L,achievements:W=[],onSendMessage:P,onUpdateSettings:T,drawerWidth:A=400,setDrawerWidth:M,minWidth:D=320,maxWidth:R=600,currentScreen:G})=>{const[Q,B]=s.useState(""),[U,q]=s.useState("all"),[F,H]=s.useState(""),[J,K]=s.useState(""),O=s.useRef(null),V=s.useRef(null),[X,Y]=s.useState({soundEnabled:!0,musicEnabled:!0,notifications:!0,autoSave:!0,theme:"dark",language:"en"}),I="game"===G||"combat"===G,Z=s.useRef(!1),$=e=>{if(!Z.current||!M)return;const s=window.innerWidth,t=Math.min(Math.max(s-e.clientX,D),R);M(t)},_=()=>{Z.current&&(Z.current=!1,document.body.style.cursor="",document.body.style.userSelect="")};t.useEffect(()=>{if(!C)return window.addEventListener("mousemove",$),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",_)}});const ee=I?[{key:"chat",label:"Chat",icon:e.jsx(l,{size:20}),description:"Real-time messaging"},{key:"log",label:"Story Log",icon:e.jsx(i,{size:20}),description:"Campaign events & notes"},{key:"party",label:"Party",icon:e.jsx(r,{size:20}),description:"Player status & info"},{key:"world",label:"World",icon:e.jsx(n,{size:20}),description:"World state & exploration"},{key:"tools",label:"Tools",icon:e.jsx(c,{size:20}),description:"Game tools & settings"}]:[{key:"chat",label:"Chat",icon:e.jsx(l,{size:20}),description:"Real-time messaging"},{key:"log",label:"Campaign Log",icon:e.jsx(i,{size:20}),description:"Story and events"},{key:"players",label:"Players",icon:e.jsx(r,{size:20}),description:"Player management"},{key:"world",label:"World",icon:e.jsx(n,{size:20}),description:"World state & events"},{key:"achievements",label:"Achievements",icon:e.jsx(o,{size:20}),description:"Progress & rewards"},{key:"settings",label:"Settings",icon:e.jsx(c,{size:20}),description:"Game preferences"}],se=(e,s)=>{const t={...X,[e]:s};Y(t),null==T||T(t)},te=z.filter(e=>!(Q&&!e.content.toLowerCase().includes(Q.toLowerCase())||"all"!==U&&e.type!==U));return v?e.jsxs("div",{className:"fixed inset-y-0 right-0 bg-gradient-to-b from-blue-900 via-indigo-900 to-purple-900 border-l border-white/20 shadow-2xl z-40 transition-transform duration-300 ease-in-out "+(C?"w-full sm:w-96":""),style:{width:C?A:"auto"},children:[!C&&M&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 bg-blue-600 cursor-col-resize hover:bg-blue-400 transition-colors",onMouseDown:e=>{!C&&M&&(Z.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none")}}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("h2",{className:"text-lg font-semibold text-white",children:"GameTools"})}),e.jsx("button",{onClick:w,className:"p-2 text-blue-200 hover:text-white transition-colors",children:e.jsx(a,{size:20})})]}),e.jsx("div",{className:"flex border-b border-white/20 overflow-x-auto",children:ee.map(s=>e.jsxs("button",{onClick:()=>k(s.key),className:"flex items-center space-x-2 p-3 min-w-0 flex-1 transition-colors "+(y===s.key?"bg-blue-600 text-white border-b-2 border-blue-400":"text-blue-200 hover:text-white hover:bg-white/10"),title:s.description,children:[s.icon,e.jsx("span",{className:"text-sm font-medium",children:s.label})]},s.key))}),e.jsx("div",{className:"flex-1 overflow-hidden",children:(()=>{switch(y){case"chat":default:return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:I?"Adventure Chat":"Campaign Chat"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-300 hover:text-blue-100 transition-colors",children:e.jsx(d,{size:16})}),e.jsx("button",{className:"p-1 text-blue-300 hover:text-blue-100 transition-colors",children:e.jsx(x,{size:16})})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{ref:V,type:"text",placeholder:"Search messages...",value:Q,onChange:e=>B(e.target.value),className:"flex-1 px-3 py-2 bg-white/10 text-white placeholder-gray-300 rounded-lg border border-white/20 focus:outline-none focus:border-blue-400"}),e.jsxs("select",{value:U,onChange:e=>q(e.target.value),className:"px-3 py-2 bg-white/10 text-white rounded-lg border border-white/20 focus:outline-none focus:border-blue-400",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"player",children:"Players"}),e.jsx("option",{value:"dm",children:"DM"}),e.jsx("option",{value:"system",children:"System"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:te.map((s,t)=>e.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-white "+("player"===s.type?"bg-blue-500/50 text-blue-100":"dm"===s.type?"bg-purple-500/50 text-purple-100":"bg-gray-500/50 text-gray-100"),children:"player"===s.type?"Player":"dm"===s.type?"DM":"System"}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.timestamp).toLocaleTimeString()})]}),e.jsx("p",{className:"text-white text-sm leading-relaxed",children:s.content})]},t))}),e.jsx("div",{className:"p-4 border-t border-white/20",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{ref:O,type:"text",placeholder:"Type a message...",value:F,onChange:e=>H(e.target.value),className:"flex-1 px-3 py-2 bg-white/10 text-white placeholder-gray-300 rounded-lg border border-white/20 focus:outline-none focus:border-blue-400",onKeyPress:e=>{"Enter"===e.key&&F.trim()&&P&&(P(F),H(""))}}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>{F.trim()&&P&&(P(F),H(""))},children:"Send"})]})})]});case"log":return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:I?"Story Log":"Campaign Log"}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{className:"p-1 text-blue-300 hover:text-blue-100 transition-colors",children:e.jsx(d,{size:16})})}),e.jsx("input",{type:"text",placeholder:"Search log entries...",value:J,onChange:e=>K(e.target.value),className:"w-full px-3 py-2 bg-white/10 text-white placeholder-gray-300 rounded-lg border border-white/20 focus:outline-none focus:border-blue-400"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(m,{size:14,className:"text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Session Start"}),e.jsx("span",{className:"text-xs text-gray-400",children:"2 hours ago"})]}),e.jsx("p",{className:"text-gray-200",children:"The party entered the ancient ruins..."})]}),e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(h,{size:14,className:"text-red-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Combat Encounter"}),e.jsx("span",{className:"text-xs text-gray-400",children:"1o"})]}),e.jsx("p",{className:"text-gray-200",children:"Battle with goblin scouts..."})]})]})]});case"party":return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-white/20",children:e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Party Status"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:E.map((s,t)=>{var a;return e.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold",children:(null==(a=s.name)?void 0:a.charAt(0))||"P"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-white",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:["Level ",s.level," ",s.class]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(b,{size:12,className:"text-red-400"}),e.jsxs("span",{children:[s.health,"/",s.maxHealth]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(u,{size:12,className:"text-blue-400"}),e.jsxs("span",{children:["AC ",s.armorClass]})]})]})]})]})},t)})})]});case"world":return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-white/20",children:e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"World State"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:L&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(p,{size:16,className:"text-blue-400"}),e.jsx("span",{className:"font-semibold text-white",children:"Current Location"})]}),e.jsx("p",{className:"text-gray-200",children:L.currentLocation||"Unknown Location"})]}),e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(j,{size:16,className:"text-green-400"}),e.jsx("span",{className:"font-semibold text-white",children:"Time & Weather"})]}),e.jsxs("p",{className:"text-gray-200",children:[L.currentTime||"Day"," - ",L.weather||"Clear"]})]}),L.activeQuests&&L.activeQuests.length>0&&e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(f,{size:16,className:"text-yellow-400"}),e.jsx("span",{className:"font-semibold text-white",children:"Active Quests"})]}),e.jsx("div",{className:"space-y-2",children:L.activeQuests.map((s,t)=>e.jsxs("p",{className:"text-sm text-gray-200",children:["• ",s.title]},t))})]})]})})]});case"tools":return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-white/20",children:e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Game Tools"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(g,{size:16,className:"text-blue-400"}),e.jsx("span",{className:"font-semibold text-white",children:"Audio Settings"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:X.soundEnabled,onChange:e=>se("soundEnabled",e.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-200",children:"Sound Effects"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:X.musicEnabled,onChange:e=>se("musicEnabled",e.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-200",children:"Background Music"})]})]})]}),e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(N,{size:16,className:"text-yellow-400"}),e.jsx("span",{className:"font-semibold text-white",children:"Notifications"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:X.notifications,onChange:e=>se("notifications",e.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-200",children:"Enable Notifications"})]})]})]})]})}})()})]}):null};export{v as default};
